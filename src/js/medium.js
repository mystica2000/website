/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */ !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).mediumZoom=t()}(this,function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},t=function e(t){return"IMG"===t.tagName},o=function e(t){return t&&1===t.nodeType},n=function e(t){return".svg"===(t.currentSrc||t.src).substr(-4).toLowerCase()},i=function e(n){try{var i;if(Array.isArray(n))return n.filter(t);if(i=n,NodeList.prototype.isPrototypeOf(i))return[].slice.call(n).filter(t);if(o(n))return[n].filter(t);if("string"==typeof n)return[].slice.call(document.querySelectorAll(n)).filter(t);return[]}catch(r){throw TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},r=function e(t){var o=document.createElement("div");return o.classList.add("medium-zoom-overlay"),o.style.background=t,o},d=function e(t){var o=t.getBoundingClientRect(),n=o.top,i=o.left,r=o.width,d=o.height,a=t.cloneNode(),m=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return a.removeAttribute("id"),a.style.position="absolute",a.style.top=n+m+"px",a.style.left=i+l+"px",a.style.width=r+"px",a.style.height=d+"px",a.style.transform="",a},a=function t(o,n){var i=e({bubbles:!1,cancelable:!1,detail:void 0},n);if("function"==typeof window.CustomEvent)return new CustomEvent(o,i);var r=document.createEvent("CustomEvent");return r.initCustomEvent(o,i.bubbles,i.cancelable,i.detail),r},m=function t(m){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=window.Promise||function e(t){function o(){}t(o,o)},s=function e(t){var o=t.target;if(o===A){b();return}-1!==_.indexOf(o)&&E({target:o})},u=function e(){!x&&S.original&&Math.abs(O-(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0))>k.scrollOffset&&setTimeout(b,150)},f=function e(t){var o=t.key||t.keyCode;("Escape"===o||"Esc"===o||27===o)&&b()},p=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n;if(n.background&&(A.style.background=n.background),n.container&&n.container instanceof Object&&(i.container=e({},k.container,n.container)),n.template){var r=o(n.template)?n.template:document.querySelector(n.template);i.template=r}return k=e({},k,i),_.forEach(function(e){e.dispatchEvent(a("medium-zoom:update",{detail:{zoom:T}}))}),T},g=function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e({},k,n))},v=function e(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];var r=o.reduce(function(e,t){return[].concat(e,i(t))},[]);return r.filter(function(e){return -1===_.indexOf(e)}).forEach(function(e){_.push(e),e.classList.add("medium-zoom-image")}),w.forEach(function(e){var t=e.type,o=e.listener,n=e.options;r.forEach(function(e){e.addEventListener(t,o,n)})}),T},h=function e(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];S.zoomed&&b();var r=o.length>0?o.reduce(function(e,t){return[].concat(e,i(t))},[]):_;return r.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(a("medium-zoom:detach",{detail:{zoom:T}}))}),_=_.filter(function(e){return -1===r.indexOf(e)}),T},z=function e(t,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _.forEach(function(e){e.addEventListener("medium-zoom:"+t,o,n)}),w.push({type:"medium-zoom:"+t,listener:o,options:n}),T},y=function e(t,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _.forEach(function(e){e.removeEventListener("medium-zoom:"+t,o,n)}),w=w.filter(function(e){return!(e.type==="medium-zoom:"+t&&e.listener.toString()===o.toString())}),T},$=function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.target,m=function t(){var i={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},r=void 0,d=void 0;if(k.container){if(k.container instanceof Object)r=(i=e({},i,k.container)).width-i.left-i.right-2*k.margin,d=i.height-i.top-i.bottom-2*k.margin;else{var a,m=(o(k.container)?k.container:document.querySelector(k.container)).getBoundingClientRect(),l=m.width,c=m.height;i=e({},i,{width:l,height:c,left:m.left,top:m.top})}}r=r||i.width-2*k.margin,d=d||i.height-2*k.margin;var s=S.zoomedHd||S.original,u=n(s)?r:s.naturalWidth||r,f=n(s)?d:s.naturalHeight||d,p=s.getBoundingClientRect(),g=p.top,v=p.left,h=p.width,z=p.height,y=Math.min(u,r)/h,$=Math.min(f,d)/z,b=Math.min(y,$),E=(-v+(r-h)/2+k.margin+i.left)/b,L=(-g+(d-z)/2+k.margin+i.top)/b,H="scale("+b+") translate3d("+E+"px, "+L+"px, 0)";S.zoomed.style.transform=H,S.zoomedHd&&(S.zoomedHd.style.transform=H)};return new c(function(e){if(r&&-1===_.indexOf(r)){e(T);return}var t=function t(){x=!1,S.zoomed.removeEventListener("transitionend",t),S.original.dispatchEvent(a("medium-zoom:opened",{detail:{zoom:T}})),e(T)};if(S.zoomed){e(T);return}if(r)S.original=r;else if(_.length>0){var n=_;S.original=n[0]}else{e(T);return}if(S.original.dispatchEvent(a("medium-zoom:open",{detail:{zoom:T}})),O=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,x=!0,S.zoomed=d(S.original),document.body.appendChild(A),k.template){var i=o(k.template)?k.template:document.querySelector(k.template);S.template=document.createElement("div"),S.template.appendChild(i.content.cloneNode(!0)),document.body.appendChild(S.template)}if(document.body.appendChild(S.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),S.original.classList.add("medium-zoom-image--hidden"),S.zoomed.classList.add("medium-zoom-image--opened"),S.zoomed.addEventListener("click",b),S.zoomed.addEventListener("transitionend",t),S.original.getAttribute("data-zoom-src")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("srcset"),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.src=S.zoomed.getAttribute("data-zoom-src"),S.zoomedHd.onerror=function(){clearInterval(l),console.warn("Unable to reach the zoom image target "+S.zoomedHd.src),S.zoomedHd=null,m()};var l=setInterval(function(){S.zoomedHd.complete&&(clearInterval(l),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",b),document.body.appendChild(S.zoomedHd),m())},10)}else if(S.original.hasAttribute("srcset")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.removeAttribute("loading");var c=S.zoomedHd.addEventListener("load",function(){S.zoomedHd.removeEventListener("load",c),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",b),document.body.appendChild(S.zoomedHd),m()})}else m()})},b=function e(){return new c(function(e){if(x||!S.original){e(T);return}var t=function t(){S.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(S.zoomed),S.zoomedHd&&document.body.removeChild(S.zoomedHd),document.body.removeChild(A),S.zoomed.classList.remove("medium-zoom-image--opened"),S.template&&document.body.removeChild(S.template),x=!1,S.zoomed.removeEventListener("transitionend",t),S.original.dispatchEvent(a("medium-zoom:closed",{detail:{zoom:T}})),S.original=null,S.zoomed=null,S.zoomedHd=null,S.template=null,e(T)};x=!0,document.body.classList.remove("medium-zoom--opened"),S.zoomed.style.transform="",S.zoomedHd&&(S.zoomedHd.style.transform=""),S.template&&(S.template.style.transition="opacity 150ms",S.template.style.opacity=0),S.original.dispatchEvent(a("medium-zoom:close",{detail:{zoom:T}})),S.zoomed.addEventListener("transitionend",t)})},E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.target;return S.original?b():$({target:o})},L=function e(){return k},H=function e(){return _},C=function e(){return S.original},_=[],w=[],x=!1,O=0,k=l,S={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(m)?k=m:(m||"string"==typeof m)&&v(m),k=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},k);var A=r(k.background);document.addEventListener("click",s),document.addEventListener("keyup",f),document.addEventListener("scroll",u),window.addEventListener("resize",b);var T={open:$,close:b,toggle:E,update:p,clone:g,attach:v,detach:h,on:z,off:y,getOptions:L,getImages:H,getZoomedImage:C};return T};return!function e(t,o){void 0===o&&(o={});var n=o.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),m});